# BabyHippo 아키텍처 로드맵

## 📊 현재 상태 (v4.3.0)

### ✅ 완성된 부분 (엔진 레벨)

#### 1. 뉴런 물리 엔진
- **v2: HHSomaQuick** - 생물학적 정확도 최우선
  - Flyweight 패턴으로 메모리 효율적 (30GB → 0.02GB)
  - Lookup Table 기반 정확한 α/β 함수
  - Event-driven 최적화
  
- **v3: IzhikevichNeuron** - 대규모 네트워크용
  - 계산량: HH 대비 100배 빠름
  - 생물학적 유사도: 90-95%
  - 10^5+ 뉴런 네트워크에 최적
  
- **v4: HHLIFNeuron** - HH 기반 단순화
  - HH의 생물학적 정확도 + LIF의 계산 효율성
  - 중간 규모 네트워크(10^3~10^4)에 적합
  
- **v5: MyelinatedAxon** - 도약전도 PDE
  - 물리적 도약전도 모델
  - 노드/인터노드 구간 구분
  - CFL 안정조건 기반 자동 서브스텝 분할

#### 2. 기본 시냅스
- **STDPSynapse** - 기본 STDP 구현
  - LTP/LTD 메커니즘
  - Sleep consolidation
  - Memory persistence (영속성)

#### 3. 해마 구조
- **직렬 경로**: DG → CA3 → CA1 → SUB
- 각 구간 뉴런 모델 (HHSomaQuick 사용)

#### 4. 성장 단계 시스템 (Growth Stage System)
- **블록체인 기반 달성 시스템**: 성장 단계 달성 기록 및 보상
- **6단계 성장 시스템**: BabyHippo → TeenHippo → YouthHippo → Hippocampus → WisdomHippo → MagicHippo
- **벤치마크 자동 측정**: 기억 수, 응답 속도, 메모리 사용량, 독립도
- **최초 달성자 추적**: 블록체인 기반 공정한 기록
- **보상 시스템**: 토큰 보상 및 재분배 시스템 결정권
- **상세 문서**: [GROWTH_SYSTEM.md](./GROWTH_SYSTEM.md)

---

## ⚠️ 확장 필요 부분 (네트워크/학습 레벨)

### 🔴 Phase 1: 시냅스 엔진 고도화 (최우선)

**현재 상태**: L1 수준 (기본 STDP만 구현)

**필요한 기능**:

1. **시냅스 지연 시간 (Propagation delay)**
   - 현재: 단순 큐 방식 (`delay_ms`)
   - 필요: 실제 축삭 전도 지연 모델링
   - 연결: MyelinatedAxon과 통합

2. **시냅스 피로도 (Fatigue)**
   - 연속 스파이크 시 시냅스 효율 감소
   - 회복 시간 모델링
   - 단기 가소성(STP)과 연계

3. **AMPA/NMDA 비율**
   - AMPA: 빠른 전도 (기본 전류)
   - NMDA: 느린 전도 (학습/가소성)
   - 비율에 따른 학습 효과 차이

4. **STDP 정확성 향상**
   - 현재: 단순 지수 감쇠 LTP/LTD
   - 필요: 
     - 비대칭 STDP 윈도우
     - 트리플트 STDP (3개 스파이크)
     - 메타플라스틱 (가소성의 가소성)

5. **해마 고유 위상 (Theta Phase Precession)**
   - CA1 뉴런의 위상 선행 (phase precession)
   - 공간 기억과 시간 기억의 연결
   - 리플(ripple) 파동 모델링

**예상 작업량**: 2-3주

---

### 🟡 Phase 2: 해마 네트워크 위상 구현

**현재 상태**: 순서만 맞는 약식 버전

**필요한 기능**:

1. **DG → CA3 분지 연결**
   - 현재: 1:1 연결
   - 필요: 1:N 분지 (실제 비율: 1:10~1:50)
   - 패턴 분리 강화

2. **CA3 내부 Recurrent Network**
   - 현재: 순차 전달만
   - 필요: CA3 뉴런 간 상호 연결
   - 자동 연상 (auto-association)
   - 패턴 완성 (pattern completion)

3. **CA1 시냅스 정렬**
   - 시간적 정렬 (temporal alignment)
   - 공간적 정렬 (spatial alignment)
   - 위상 정렬 (phase alignment)

4. **SUB 패턴 압축 출력**
   - 다차원 정보 → 저차원 표현
   - 피질로의 효율적 전달

**예상 작업량**: 3-4주

---

### 🟢 Phase 3: 에너지 대사 통합

**현재 상태**: 주석으로만 존재, 실제 연결 없음

**필요한 기능**:

1. **축삭 전도 시 에너지 소모량 반영**
   - Na⁺/K⁺ 펌프 ATP 소비
   - 축삭 길이에 따른 에너지 소모
   - MyelinatedAxon과 통합

2. **ATP 감소 → gNa 감소 → 전도 속도 저하**
   - 생물학적 피드백 루프
   - 에너지 효율 모델링
   - HHSomaQuick의 ATP 파라미터 활용

3. **미토콘드리아 모델 통합**
   - ATP 합성
   - 에너지 저장/소비
   - 열/CO₂ 생성

**예상 작업량**: 1-2주

---

### 🔵 Phase 4: Myelinated Axon 확장

**현재 상태**: 기본 도약전도 모델 완성

**필요한 기능**:

1. **역전도 (Antidromic Conduction)**
   - 역방향 신호 전달
   - 다발성 입력 처리

2. **다발성 입력 상호 간섭**
   - 여러 축삭의 동시 전도
   - 간섭 패턴 모델링

3. **금속성 잡음 (Noise)**
   - 열 잡음
   - 이온 채널 잡음
   - 신호 대 잡음비 (SNR) 모델링

4. **Branching Axons**
   - 축삭 분지
   - 분기점에서의 신호 분배

**예상 작업량**: 2-3주

---

### 🟣 Phase 5: 대규모 시뮬레이션 최적화

**현재 상태**: 10^2 수준까지 최적화됨

**필요한 기능**:

1. **벡터화 (NumPy)**
   - Python 루프 제거
   - 배치 처리
   - 10^3~10^4 뉴런 지원

2. **병렬화**
   - 멀티프로세싱
   - GPU 가속 (CuPy/JAX)
   - 10^5+ 뉴런 지원

3. **분산 컴퓨팅**
   - 네트워크 분산
   - 10^6+ 뉴런 지원

**예상 작업량**: 4-6주

---

## 🎯 우선순위 로드맵

### Q1: 시냅스 엔진 고도화
- **Week 1-2**: 시냅스 지연/피로도, AMPA/NMDA 비율
- **Week 3**: STDP 정확성 향상
- **Week 4**: 해마 고유 위상 (precession)

### Q2: 해마 네트워크 위상
- **Week 5-6**: DG→CA3 분지 연결, CA3 recurrent network
- **Week 7**: CA1 시냅스 정렬
- **Week 8**: SUB 패턴 압축

### Q3: 에너지 대사 + Axon 확장
- **Week 9-10**: 에너지 대사 통합
- **Week 11-12**: Myelinated Axon 확장

### Q4: 대규모 최적화
- **Week 13-16**: 벡터화, 병렬화, 분산 컴퓨팅

---

## 💡 핵심 인사이트

### ✅ 완성된 것
- **뉴런 물리 엔진**: 완성형
- **기본 시냅스**: 작동하는 L1 수준
- **해마 구조**: 기능적으로 작동

### 🚀 다음 단계
- **시냅스 엔진**: L1 → L2 고도화
- **네트워크 위상**: 실제 생리학적 비율 반영
- **에너지 통합**: 생물학적 피드백 루프
- **대규모 최적화**: 확장성 확보

### 🎯 비유
> **자동차 엔진(HH, Axon)은 완성했고, 이제 도로/배선/네트워크 생태계를 만드는 단계**

---

## 📝 참고사항

- 모든 확장은 **기존 엔진 구조를 유지**하면서 추가
- **하위 호환성** 보장
- **점진적 통합** 방식 (한 번에 다 하지 않음)
- **실험적 검증** 후 통합

---

**Last Updated**: 2024-12-19
**Version**: 4.3.0 → 5.0.0 (예정)

