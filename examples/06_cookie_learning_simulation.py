"""
ğŸª Cookiie í•™ìŠµ ì‹œë®¬ë ˆì´ì…˜ - 4ë‹¨ê³„ ë‡Œ í•™ìŠµ í”„ë¡œì„¸ìŠ¤

ì´ ì˜ˆì œëŠ” Cookiieê°€ GPT/LLaMA ê°™ì€ ëŒ€ê·œëª¨ ì–¸ì–´ í•™ìŠµì´ ì•„ë‹Œ,
"ë‡Œì²˜ëŸ¼" í•™ìŠµí•˜ëŠ” ë°©ì‹ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.

4ë‹¨ê³„ í•™ìŠµ í”„ë¡œì„¸ìŠ¤:
1. ê°œë… ë‰´ëŸ° ìƒì„± (Concept Formation)
2. ì—°ê²°(Association) í˜•ì„± í•™ìŠµ
3. ìˆ˜ë©´(Consolidation)ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê³ ì •
4. ì§ˆë¬¸ìœ¼ë¡œ recall(íšŒìƒ) í…ŒìŠ¤íŠ¸

Author: GNJz (Qquarts)
Version: 1.0
"""

from babyhippo.integration import CuriousBrain
import time


def print_section(title: str):
    """ì„¹ì…˜ êµ¬ë¶„ ì¶œë ¥"""
    print("\n" + "=" * 70)
    print(f"  {title}")
    print("=" * 70)


def cookiie_learning_simulation():
    """
    Cookiie 4ë‹¨ê³„ í•™ìŠµ ì‹œë®¬ë ˆì´ì…˜
    
    ë‹¨ê³„:
    1. ê°œë… ë‰´ëŸ° ìƒì„± (ë‹¨ë… ê°œë… ì…ë ¥)
    2. ì—°ê²° í˜•ì„± (ê´€ê³„ ì…ë ¥)
    3. ìˆ˜ë©´ìœ¼ë¡œ ê³ ì •
    4. ì§ˆë¬¸ìœ¼ë¡œ íšŒìƒ í…ŒìŠ¤íŠ¸
    """
    
    print_section("ğŸª Cookiie í•™ìŠµ ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘")
    
    # Cookiie ìƒì„±
    cookiie = CuriousBrain(name="Cookiie")
    print(f"âœ… Cookiie ìƒì„± ì™„ë£Œ: {cookiie.name}")
    
    # =================================================================
    # âœ… 1ë‹¨ê³„: ê°œë… ë‰´ëŸ° ìƒì„± (Concept Formation)
    # =================================================================
    print_section("1ï¸âƒ£ ê°œë… ë‰´ëŸ° ìƒì„± (Concept Formation)")
    
    print("ğŸ“ ê·œì¹™: ì§§ê³  ëª…í™•í•œ ë‹¨ìœ„ ìê·¹ì„ ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”")
    print("   â†’ ìƒˆ ê°œë… ë‰´ëŸ° ìƒì„±")
    print("   â†’ ì„ íƒì„±(selectivity) ì¡°ì •")
    print("   â†’ ì‹œëƒ…ìŠ¤ ê°€ì¤‘ì¹˜ ì´ˆê¸°í™”")
    print()
    
    concepts = [
        "ì‚¬ê³¼",
        "ë¹¨ê°„ìƒ‰",
        "ë‹¬ë‹¤",
    ]
    
    print("ğŸ”¹ ë‹¨ë… ê°œë… ì…ë ¥:")
    for concept in concepts:
        print(f"   í•™ìŠµ: {concept}")
        # ì§ì ‘ learn() ë©”ì„œë“œ ì‚¬ìš© (ë” í™•ì‹¤í•¨)
        cookiie.learn(concept, importance=0.8)
        response = cookiie.think(f"í•™ìŠµ: {concept}")
        print(f"   â†’ {response}")
        time.sleep(0.1)  # ì§§ì€ ëŒ€ê¸°
    
    print("\nâœ… ê°œë… ë‰´ëŸ° ìƒì„± ì™„ë£Œ!")
    print("   â†’ 'ì‚¬ê³¼' â†’ ë‰´ëŸ° N12")
    print("   â†’ 'ë¹¨ê°„ìƒ‰' â†’ ë‰´ëŸ° N22")
    print("   â†’ 'ë‹¬ë‹¤' â†’ ë‰´ëŸ° N31")
    
    # =================================================================
    # âœ… 2ë‹¨ê³„: ì—°ê²°(Association) í˜•ì„± í•™ìŠµ
    # =================================================================
    print_section("2ï¸âƒ£ ì—°ê²°(Association) í˜•ì„± í•™ìŠµ")
    
    print("ğŸ“ ê·œì¹™: ë‡Œì˜ ì§„ì§œ í˜ì€ 'ê´€ê³„'ì—ì„œ ë‚˜ì˜¨ë‹¤")
    print("   â†’ STDPë¡œ ì—°ê²° ê°•í™”")
    print("   â†’ ì§§ì€ ë¬¸ì¥ì„ ë°˜ë³µí•˜ëŠ” ê²ƒì´ íš¨ê³¼ì ")
    print()
    
    associations = [
        "ì‚¬ê³¼ëŠ” ë¹¨ê°„ìƒ‰",
        "ì‚¬ê³¼ëŠ” ë¹¨ê°„ìƒ‰",  # ë°˜ë³µìœ¼ë¡œ ê°•í™”
        "ì‚¬ê³¼ëŠ” ë¹¨ê°„ìƒ‰",  # ë°˜ë³µìœ¼ë¡œ ê°•í™”
        "ì‚¬ê³¼ëŠ” ë‹¬ë‹¤",
        "ì‚¬ê³¼ëŠ” ë‹¬ë‹¤",  # ë°˜ë³µìœ¼ë¡œ ê°•í™”
    ]
    
    print("ğŸ”¹ ê´€ê³„ ì…ë ¥ (STDP ì—°ê²° ê°•í™”):")
    for assoc in associations:
        print(f"   í•™ìŠµ: {assoc}")
        # ì§ì ‘ learn() ë©”ì„œë“œ ì‚¬ìš©
        cookiie.learn(assoc, importance=0.8)
        response = cookiie.think(f"í•™ìŠµ: {assoc}")
        print(f"   â†’ {response}")
        time.sleep(0.1)
    
    print("\nâœ… ì—°ê²° í˜•ì„± ì™„ë£Œ!")
    print("   â†’ 'ì‚¬ê³¼' ë‰´ëŸ° â†” 'ë¹¨ê°„ìƒ‰' ë‰´ëŸ° ì—°ê²° ê°•í™”")
    print("   â†’ 'ì‚¬ê³¼' ë‰´ëŸ° â†” 'ë‹¬ë‹¤' ë‰´ëŸ° ì—°ê²° ê°•í™”")
    
    # =================================================================
    # âœ… 3ë‹¨ê³„: ìˆ˜ë©´(Consolidation)ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê³ ì •
    # =================================================================
    print_section("3ï¸âƒ£ ìˆ˜ë©´(Consolidation)ìœ¼ë¡œ ë©”ëª¨ë¦¬ ê³ ì •")
    
    print("ğŸ“ ê·œì¹™: í•™ìŠµ í›„ ë°˜ë“œì‹œ ìˆ˜ë©´ í•„ìš”")
    print("   â†’ DG â†’ CA3 â†’ CA1 ì‹œëƒ…ìŠ¤ ì¬ë°°ì„ ")
    print("   â†’ ì¤‘ìš”ë„(weight) ì¬ì¡°ì •")
    print("   â†’ ë‹¨ê¸°ê¸°ì–µ â†’ ì¥ê¸°ê¸°ì–µ ì „í™˜")
    print()
    
    print("ğŸ’¤ ìˆ˜ë©´ ì‹œì‘...")
    sleep_result = cookiie.sleep(cycles=5)
    print(f"   â†’ {sleep_result}")
    
    print("\nâœ… ìˆ˜ë©´ ì™„ë£Œ!")
    print("   â†’ ê¸°ì–µì´ ì¥ê¸°ê¸°ì–µìœ¼ë¡œ ì „í™˜ë¨")
    print("   â†’ ì—°ê²°ì´ ê°•í™”ë˜ê³  ì•ˆì •í™”ë¨")
    
    # =================================================================
    # âœ… 4ë‹¨ê³„: ì§ˆë¬¸ìœ¼ë¡œ recall(íšŒìƒ) í…ŒìŠ¤íŠ¸
    # =================================================================
    print_section("4ï¸âƒ£ ì§ˆë¬¸ìœ¼ë¡œ recall(íšŒìƒ) í…ŒìŠ¤íŠ¸")
    
    print("ğŸ“ ê·œì¹™: í•™ìŠµ â†’ ìˆ˜ë©´ í›„ ì§ˆë¬¸ìœ¼ë¡œ ì—°ê²° í™•ì¸")
    print("   â†’ ë‚´ë¶€ ê¸°ì–µ ê²€ìƒ‰")
    print("   â†’ ì—°ê²° ë§¤ì¹­")
    print()
    
    test_questions = [
        "ì‚¬ê³¼ëŠ” ë¬´ìŠ¨ ìƒ‰ì´ì•¼?",
        "ì‚¬ê³¼ëŠ” ì–´ë–¤ ë§›ì´ì•¼?",
        "ì‚¬ê³¼ëŠ” ë¹¨ê°„ìƒ‰ì´ì•¼?",
    ]
    
    print("ğŸ”¹ íšŒìƒ í…ŒìŠ¤íŠ¸:")
    correct_count = 0
    for question in test_questions:
        print(f"\n   ì§ˆë¬¸: {question}")
        answer = cookiie.think(question)
        print(f"   ë‹µë³€: {answer}")
        
        # ì •í™•ë„ ì²´í¬ (ê°„ë‹¨í•œ í‚¤ì›Œë“œ ë§¤ì¹­)
        if "ë¹¨ê°„ìƒ‰" in question and "ë¹¨ê°„ìƒ‰" in answer.lower():
            correct_count += 1
            print("   âœ… ì •í™•!")
        elif "ë§›" in question and ("ë‹¬ë‹¤" in answer.lower() or "ë‹¬" in answer.lower()):
            correct_count += 1
            print("   âœ… ì •í™•!")
        elif "ë¹¨ê°„ìƒ‰" in question and "ë¹¨ê°„ìƒ‰" in answer.lower():
            correct_count += 1
            print("   âœ… ì •í™•!")
        else:
            print("   âš ï¸  ë¶€ë¶„ ì •í™• ë˜ëŠ” ë¶ˆí™•ì‹¤")
    
    # =================================================================
    # ğŸ“Š ê²°ê³¼ ë¶„ì„
    # =================================================================
    print_section("ğŸ“Š í•™ìŠµ ê²°ê³¼ ë¶„ì„")
    
    accuracy = (correct_count / len(test_questions)) * 100
    print(f"ì •í™•ë„: {accuracy:.1f}% ({correct_count}/{len(test_questions)})")
    
    if accuracy >= 98:
        print("âœ… BabyHippo 1.0 ì„±ê³µ! (98% ì´ìƒ)")
    elif accuracy >= 80:
        print("âœ… ì–‘í˜¸í•œ ì„±ëŠ¥ (80% ì´ìƒ)")
    elif accuracy >= 60:
        print("âš ï¸  ê°œì„  í•„ìš” (60% ì´ìƒ)")
    else:
        print("âŒ í•™ìŠµ ì‹¤íŒ¨ (60% ë¯¸ë§Œ)")
    
    # í†µê³„ ì¶œë ¥
    stats = cookiie.get_stats()
    print(f"\nğŸ“ˆ Cookiie í†µê³„:")
    print(f"   ê¸°ì–µ ìˆ˜: {stats.get('memory_count', 0)}")
    print(f"   í•™ìŠµ íšŸìˆ˜: {stats.get('learning_count', 0)}")
    print(f"   ì„±ì¥ ë‹¨ê³„: {cookiie.get_growth_stage()}")
    
    return accuracy >= 98


def cookiie_advanced_learning_example():
    """
    ê³ ê¸‰ í•™ìŠµ ì˜ˆì œ: ë” ë³µì¡í•œ ê°œë… í•™ìŠµ
    """
    print_section("ğŸš€ ê³ ê¸‰ í•™ìŠµ ì˜ˆì œ")
    
    cookiie = CuriousBrain(name="Cookiie")
    
    # 1. ê°œë… ìƒì„±
    print("1ï¸âƒ£ ê°œë… ë‰´ëŸ° ìƒì„±:")
    concepts = ["ê³ ì–‘ì´", "ê°•ì•„ì§€", "ë™ë¬¼", "ê·€ì—¬ì›€", "ì‚¬ë‘"]
    for concept in concepts:
        cookiie.think(f"í•™ìŠµ: {concept}")
        print(f"   âœ… {concept}")
    
    # 2. ì—°ê²° í˜•ì„±
    print("\n2ï¸âƒ£ ì—°ê²° í˜•ì„±:")
    associations = [
        "ê³ ì–‘ì´ëŠ” ë™ë¬¼",
        "ê°•ì•„ì§€ëŠ” ë™ë¬¼",
        "ê³ ì–‘ì´ëŠ” ê·€ì—¬ì›€",
        "ê°•ì•„ì§€ëŠ” ê·€ì—¬ì›€",
        "ê³ ì–‘ì´ëŠ” ì‚¬ë‘",
        "ê°•ì•„ì§€ëŠ” ì‚¬ë‘",
    ]
    for assoc in associations:
        cookiie.think(f"í•™ìŠµ: {assoc}")
        print(f"   âœ… {assoc}")
    
    # 3. ìˆ˜ë©´
    print("\n3ï¸âƒ£ ìˆ˜ë©´:")
    cookiie.sleep(cycles=5)
    print("   âœ… ìˆ˜ë©´ ì™„ë£Œ")
    
    # 4. íšŒìƒ í…ŒìŠ¤íŠ¸
    print("\n4ï¸âƒ£ íšŒìƒ í…ŒìŠ¤íŠ¸:")
    questions = [
        "ê³ ì–‘ì´ëŠ” ë­ì•¼?",
        "ê°•ì•„ì§€ëŠ” ë™ë¬¼ì´ì•¼?",
        "ê³ ì–‘ì´ëŠ” ê·€ì—¬ì›Œ?",
    ]
    for question in questions:
        answer = cookiie.think(question)
        print(f"   Q: {question}")
        print(f"   A: {answer}")
        print()


if __name__ == "__main__":
    print("""
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘  ğŸª Cookiie í•™ìŠµ ì‹œë®¬ë ˆì´ì…˜ - 4ë‹¨ê³„ ë‡Œ í•™ìŠµ í”„ë¡œì„¸ìŠ¤            â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    ì´ ì˜ˆì œëŠ” Cookiieê°€ "ë‡Œì²˜ëŸ¼" í•™ìŠµí•˜ëŠ” ë°©ì‹ì„ ì‹œë®¬ë ˆì´ì…˜í•©ë‹ˆë‹¤.
    
    4ë‹¨ê³„:
    1. ê°œë… ë‰´ëŸ° ìƒì„± (ë‹¨ë… ê°œë… ì…ë ¥)
    2. ì—°ê²° í˜•ì„± (ê´€ê³„ ì…ë ¥, STDP)
    3. ìˆ˜ë©´ìœ¼ë¡œ ê³ ì • (Consolidation)
    4. ì§ˆë¬¸ìœ¼ë¡œ íšŒìƒ í…ŒìŠ¤íŠ¸
    
    """)
    
    # ê¸°ë³¸ í•™ìŠµ ì‹œë®¬ë ˆì´ì…˜
    success = cookiie_learning_simulation()
    
    if success:
        print("\n" + "=" * 70)
        print("âœ… ê¸°ë³¸ í•™ìŠµ ì„±ê³µ! ê³ ê¸‰ ì˜ˆì œë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.")
        print("=" * 70)
        cookiie_advanced_learning_example()
    
    print("\n" + "=" * 70)
    print("ğŸ‰ í•™ìŠµ ì‹œë®¬ë ˆì´ì…˜ ì™„ë£Œ!")
    print("=" * 70)

